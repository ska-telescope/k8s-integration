# Default values for tmc-proto.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

display: ":0"
xauthority: "~/.Xauthority"

tmcprototype:
  enabled: true
  image:
    registry: nexus.engageska-portugal.pt/tango-example
    image: tmcprototype
    tag: 0.2.6
    pullPolicy: IfNotPresent

tmalarmhandler:
  enabled: true
  image:
    registry: nexus.engageska-portugal.pt/tango-example
    image: tmalarmhandler
    tag: latest
    pullPolicy: Always

dsconfig:
  image:
    registry: nexus.engageska-portugal.pt/ska-docker
    image: tango-dsconfig
    tag: 1.2.5.1
    pullPolicy: IfNotPresent

deviceServers:
  - name: dishmaster1
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "/usr/local/bin/DishMasterDS 01"
  - name: dishmaster2
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "/usr/local/bin/DishMasterDS 02"
  - name: dishmaster3
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "/usr/local/bin/DishMasterDS 03"
  - name: dishmaster4
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "/usr/local/bin/DishMasterDS 04"
  - name: dishleafnode1
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_d0001/elt/master && /usr/local/bin/DishLeafNodeDS 01"
  - name: dishleafnode2
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - " retry --max=10 -- tango_admin --ping-device mid_d0002/elt/master && /usr/local/bin/DishLeafNodeDS 02"
  - name: dishleafnode3
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_d0003/elt/master && /usr/local/bin/DishLeafNodeDS 03"
  - name: dishleafnode4
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_d0004/elt/master && /usr/local/bin/DishLeafNodeDS 04"
  - name: cspsubarrayleafnode1
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_csp/elt/subarray_01 && /usr/local/bin/CspSubarrayLeafNodeDS 01"
  - name: cspsubarrayleafnode2
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_csp/elt/subarray_02 && /usr/local/bin/CspSubarrayLeafNodeDS 02"
  - name: cspsubarrayleafnode3
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_csp/elt/subarray_03 && /usr/local/bin/CspSubarrayLeafNodeDS 03"
  - name: cspmasterleafnode
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_csp/elt/master && /usr/local/bin/CspMasterLeafNodeDS 01"
  - name: sdpsubarrayleafnode1
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_sdp/elt/subarray_1 && /usr/local/bin/SdpSubarrayLeafNodeDS 01"
  - name: sdpsubarrayleafnode2
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_sdp/elt/subarray_2 && /usr/local/bin/SdpSubarrayLeafNodeDS 02"
  - name: sdpsubarrayleafnode3
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_sdp/elt/subarray_3 && /usr/local/bin/SdpSubarrayLeafNodeDS 03"
  - name: sdpmasterleafnode
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device mid_sdp/elt/master && /usr/local/bin/SdpMasterLeafNodeDS 01"
  - name: subarraynode1
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0001 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0002 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0003 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0004 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/csp_subarray01 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/sdp_subarray01 &&\
             /usr/local/bin/SubarrayNodeDS sa1"
  - name: subarraynode2
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0001 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0002 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0003 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0004 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/csp_subarray02 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/sdp_subarray02 &&\
             /usr/local/bin/SubarrayNodeDS sa2"
  - name: subarraynode3
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0001 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0002 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0003 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/d0004 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/csp_subarray03 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/sdp_subarray03 &&\
             /usr/local/bin/SubarrayNodeDS sa3"
  - name: centralnode
    image: "{{ .Values.tmcprototype.image.registry }}/{{ .Values.tmcprototype.image.image }}:{{ .Values.tmcprototype.image.tag }}"
    imagePullPolicy: "{{ .Values.tmcprototype.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/csp_master &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_leaf_node/sdp_master &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_subarray_node/1 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_subarray_node/2 &&\
             retry --max=10 -- tango_admin --ping-device ska_mid/tm_subarray_node/3 &&\
             /usr/local/bin/CentralNodeDS 01"
  - name: tm-alarmhandler
    image: "{{ .Values.tmalarmhandler.image.registry }}/{{ .Values.tmalarmhandler.image.image }}:{{ .Values.tmalarmhandler.image.tag }}"
    imagePullPolicy: "{{ .Values.tmalarmhandler.image.pullPolicy }}"
    command:
      - sh
    args:
      - -c
      - "./app/alarmhandler-srv 01"


nodeSelector: {}

affinity: {}

tolerations: []
